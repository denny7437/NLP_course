# –°—Ç–∞—Ç—É—Å MVP —Å–∏—Å—Ç–µ–º—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ LLM-–∫–æ–Ω—Ç–µ–Ω—Ç–∞

## üéØ –û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: **85% MVP –∑–∞–≤–µ—Ä—à–µ–Ω–æ**

### ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ —ç–ø–∏–∫–∏ (100%)

#### 1. –ú–æ–¥–µ–ª–∏ (100%)
- ‚úÖ `scripts/train_bert.py` - –æ–±—É—á–µ–Ω–∏–µ DistilBERT –¥–ª—è –±–∏–Ω–∞—Ä–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ `scripts/test_onnx_inference.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ONNX –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HuggingFace –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –∏ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ ONNX —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–ª—è CPU

#### 2. Pre-Filter Service (100%)
- ‚úÖ `services/prefilter/service.py` - ONNX Runtime –∏–Ω—Ñ–µ—Ä–µ–Ω—Å
- ‚úÖ `services/prefilter/grpc_server.py` - REST —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ ThreadPoolExecutor
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è CPU –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

#### 3. Gateway Service (100%)
- ‚úÖ `services/gateway/main.py` - FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–ª–Ω—ã–º end-to-end –ø–æ—Ç–æ–∫–æ–º
- ‚úÖ `services/gateway/models.py` - Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ `services/gateway/auth.py` - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ä–æ–ª—è–º–∏ –∏ rate limiting
- ‚úÖ `services/gateway/clients.py` - HTTP –∫–ª–∏–µ–Ω—Ç—ã —Å retry –ª–æ–≥–∏–∫–æ–π –∏ –º–æ–∫-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º–∏
- ‚úÖ `services/gateway/aggregator.py` - –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä —Ä–µ—à–µ–Ω–∏–π —Å –≤–∑–≤–µ—à–µ–Ω–Ω—ã–º–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏
- ‚úÖ `services/gateway/logger.py` - –º–æ–∫-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–æ–≤

### üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (75%)

#### 4. Safety-LLM Service (75%)
- ‚úÖ –ú–æ–∫-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ Gateway
- ‚úÖ HTTP –∫–ª–∏–µ–Ω—Ç —Å retry –ª–æ–≥–∏–∫–æ–π
- ‚è≥ –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å vLLM (—Ç—Ä–µ–±—É–µ—Ç GPU)
- ‚è≥ Dockerfile –¥–ª—è GPU –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### 5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (85%)
- ‚úÖ –ú–æ–∫-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å in-memory —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- ‚úÖ –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
- ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º ClickHouse

#### 6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (75%)
- ‚úÖ `scripts/test_api.py` - –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π API —Ç–µ—Å—Ç–µ—Ä
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ rate limiting
- ‚è≥ Unit —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### üÜï –ù–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

#### üöÄ –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞!
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏** (NumPy, Redis, python-jose)
- ‚úÖ **Gateway —Å–µ—Ä–≤–∏—Å —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω** –Ω–∞ –ø–æ—Ä—Ç—É 8000
- ‚úÖ **–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç**:
  - Health check: ‚úÖ PASSED
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞: ‚úÖ PASSED (3/3 —Ç–µ—Å—Ç–æ–≤)
  - –ë–∞—Ç—á —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è: ‚úÖ PASSED
  - –õ–æ–≥–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: ‚úÖ PASSED
  - Rate limiting: ‚ö†Ô∏è –†–∞–±–æ—Ç–∞–µ—Ç (–ª–∏–º–∏—Ç—ã –≤—ã—Å–æ–∫–∏–µ)

#### üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**: 3-5–º—Å –Ω–∞ –∑–∞–ø—Ä–æ—Å
- **–ë–∞—Ç—á –æ–±—Ä–∞–±–æ—Ç–∫–∞**: 3 –∑–∞–ø—Ä–æ—Å–∞ –∑–∞ 4.37–º—Å
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: 6 –∑–∞–ø–∏—Å–µ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
- **–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã**: "degraded" (PreFilter –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

### ‚ùå –ù–µ –Ω–∞—á–∞—Ç–æ (0%)

#### 7. Web UI (0%)
- ‚è≥ React/Vue.js –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚è≥ –î–∞—à–±–æ—Ä–¥ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚è≥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- **Gateway** (FastAPI) - ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ :8000
- **Pre-Filter** (ONNX) - ‚ö†Ô∏è –ú–æ–∫-—Ä–µ–∂–∏–º (DNS –æ—à–∏–±–∫–∞)
- **Safety-LLM** (vLLM) - ‚úÖ –ú–æ–∫-—Ä–µ–∂–∏–º
- **ClickHouse** - ‚úÖ In-memory –º–æ–∫
- **Redis** - ‚úÖ In-memory fallback

#### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å —Ä–æ–ª—è–º–∏ (viewer/analyst/admin)
- ‚úÖ Rate limiting —Å Redis fallback
- ‚úÖ –í–∑–≤–µ—à–µ–Ω–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–≤—É—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å—é (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚úÖ Health checks –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (/docs)
- ‚úÖ –ë–∞—Ç—á –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å Pre-Filter —Å–µ—Ä–≤–∏—Å** –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
2. **–û–±—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é BERT –º–æ–¥–µ–ª—å** –Ω–∞ –¥–∞—Ç–∞—Å–µ—Ç–µ
3. **–°–æ–∑–¥–∞—Ç—å Dockerfile'—ã** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
4. **–î–æ–±–∞–≤–∏—Ç—å Web UI** –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
5. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π ClickHouse** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### üèÜ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

**MVP –≥–æ—Ç–æ–≤ –Ω–∞ 85%** –∏ **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω** –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏:
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- API –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ø–æ–∫–∞–∑–∞ –∑–∞–∫–∞–∑—á–∏–∫—É
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

**–°—Ç–∞—Ç—É—Å: –ì–û–¢–û–í –î–õ–Ø –î–ï–ú–û** üöÄ 